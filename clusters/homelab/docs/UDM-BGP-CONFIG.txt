!
route-map ALLOW-ALL permit 10
!
! MetalLB VIP Pool: 192.168.100.0/24 (separate subnet from management)
! Management network: 192.168.1.0/24 (nodes: .11, .12, .22)
!
router bgp 65000
bgp router-id 192.168.1.1
no bgp ebgp-requires-policy
!
neighbor 192.168.1.11 remote-as 65001
neighbor 192.168.1.11 description k3s-cp1
neighbor 192.168.1.11 route-map ALLOW-ALL in
neighbor 192.168.1.11 route-map ALLOW-ALL out
!
neighbor 192.168.1.12 remote-as 65001
neighbor 192.168.1.12 description k3s-w1
neighbor 192.168.1.12 route-map ALLOW-ALL in
neighbor 192.168.1.12 route-map ALLOW-ALL out
!
neighbor 192.168.1.22 remote-as 65001
neighbor 192.168.1.22 description k3s-w2
neighbor 192.168.1.22 route-map ALLOW-ALL in
neighbor 192.168.1.22 route-map ALLOW-ALL out
!
neighbor 192.168.1.13 remote-as 65001
neighbor 192.168.1.13 description k3s-w3
neighbor 192.168.1.13 route-map ALLOW-ALL in
neighbor 192.168.1.13 route-map ALLOW-ALL out
!
address-family ipv4 unicast
neighbor 192.168.1.11 activate
neighbor 192.168.1.12 activate
neighbor 192.168.1.22 activate
neighbor 192.168.1.13 activate
neighbor 192.168.1.11 soft-reconfiguration inbound
neighbor 192.168.1.12 soft-reconfiguration inbound
neighbor 192.168.1.22 soft-reconfiguration inbound
neighbor 192.168.1.13 soft-reconfiguration inbound
exit-address-family
!
exit