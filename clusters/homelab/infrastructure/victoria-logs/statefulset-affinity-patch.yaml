---
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: victoria-logs-victoria-logs-single-server
spec:
  template:
    spec:
      $patch: merge
      nodeSelector:
        node.longhorn.io/create-default-disk: "true"
      tolerations:
        - key: node.longhorn.io/storage
          operator: Equal
          value: enabled
          effect: NoSchedule
      affinity:
        nodeAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
            - weight: 100
              preference:
                matchExpressions:
                  - key: node.longhorn.io/primary
                    operator: In
                    values: ["true"]
