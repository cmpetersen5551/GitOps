apiVersion: v1
kind: ConfigMap
metadata:
  name: clusterplex-worker-config
  namespace: media
  labels:
    app.kubernetes.io/name: clusterplex-worker-config
    app.kubernetes.io/part-of: clusterplex
data:
  VERSION: docker
  TZ: America/Chicago
  PUID: "1000"
  PGID: "1000"
  # Plex bundles its own Intel Media Driver (intel-media-driver conan package) statically,
  # so no system package is needed. Just mount /dev/dri and set supplementalGroups to the
  # render group GID (992 on k3s-w3) for device access.
  DOCKER_MODS: ghcr.io/pabloromeo/clusterplex_worker_dockermod:latest
  ORCHESTRATOR_URL: http://clusterplex-orchestrator:3500
  LISTENING_PORT: "3501"
  STAT_CPU_INTERVAL: "10000"
  EAE_SUPPORT: "1"
  # Intel QuickSync hardware acceleration â€” passed to ffmpeg on the worker (w3)
  FFMPEG_HWACCEL: qsv
