apiVersion: v1
kind: ConfigMap
metadata:
  name: clusterplex-worker-config
  namespace: media
  labels:
    app.kubernetes.io/name: clusterplex-worker-config
    app.kubernetes.io/part-of: clusterplex
data:
  VERSION: docker
  TZ: America/Chicago
  PUID: "1000"
  PGID: "1000"
  # universal-package-install installs apt packages on container start.
  # intel-media-va-driver-non-free provides the iHD VA-API driver (libva) required for
  # ffmpeg QSV to initialise /dev/dri/renderD128 — without it QSV fails with "Device creation failed: -12"
  DOCKER_MODS: ghcr.io/pabloromeo/clusterplex_worker_dockermod:latest|lscr.io/linuxserver/mods:universal-package-install
  INSTALL_PACKAGES: intel-media-va-driver-non-free
  ORCHESTRATOR_URL: http://clusterplex-orchestrator:3500
  LISTENING_PORT: "3501"
  STAT_CPU_INTERVAL: "10000"
  EAE_SUPPORT: "1"
  # Intel QuickSync hardware acceleration — passed to ffmpeg on the worker (w3)
  FFMPEG_HWACCEL: qsv
